<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SVG â†’ PNG Export</title>
</head>
<body>
  <svg id="mysvg" width="100" height="200" viewBox="0 0 100 200">
    <rect x="0" y="0" width="100" height="200" fill="#4caf50"/>
    <text x="50" y="100" font-size="20" text-anchor="middle" fill="white">
      SVG
    </text>
  </svg>

  <button id="save">Save as PNG</button>

  <script>
  document.getElementById("save").addEventListener("click", async () => {
    const svgEl = document.getElementById("mysvg");
    const xml = new XMLSerializer().serializeToString(svgEl);
    const svg64 = "data:image/svg+xml;charset=utf-8," + encodeURIComponent(xml);

    const img = new Image();
    img.src = svg64;
    await img.decode();

    // match SVG size in pixels
    const w = 100;
    const h = 200;

    const canvas = document.createElement("canvas");
    canvas.width = w;
    canvas.height = h;

    const ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0, w, h);

    const a = document.createElement("a");
    a.download = "output.png";
    a.href = canvas.toDataURL("image/png");
    a.click();
  });
  </script>
</body>
</html>
